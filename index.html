<!doctype html>
<html lang="ko" >
<head>
	<title>treeList</title>
	<meta charset="utf-8">
	<meta http-equiv="Content-Script-Type" content="text/javascript">
	<meta http-equiv="Content-Style-Type" content="text/css">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<link rel="shortcut icon" href="http://www.mins01.com/favicon.ico">
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />

	<script src="/js/ForGoogle.js"></script>
	<!-- google analytics -->
	<script>ForGoogle.analytics()</script>


	<!-- jquery 관련 -->
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" crossorigin="anonymous"></script>


	<!-- 부트스트랩 4 : IE8지원안됨! -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" crossorigin="anonymous">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" crossorigin="anonymous"></script>
	<!-- vue.js -->
	<script src="https://cdn.jsdelivr.net/npm/vue"></script>

	<!-- meta og -->

	<meta property="og:title" content="treeList">
	<meta property="og:description" content="treeList">
	<meta name="og:image" content="http://www.mins01.com/img/logo.gif">
	<meta property="og:image:width" content="190">
	<meta property="og:image:height" content="70" />
	<meta property="og:site_name" content="treeList" />
	<meta property="og:type" content="website">

	<!-- //meta og -->


	<link rel="stylesheet" href="treeList.css">
	<link rel="stylesheet" href="treeList-theme.css">
	<script src="treeList.js"></script>
	<script>
	var dragNode;
	document.addEventListener("dragstart", function(evt) {
		// 드래그한 요소에 대한 참조 변수
		dragNode = evt.target;
		dragNode.classList.add('treeList-leaf-dragging')
		document.body.classList.add('treeList-body-dragging')
	}, false);
	document.addEventListener("dragend", function(evt) {
		// 드래그한 요소에 대한 참조 변수
		if(!dragNode){return;}
		dragNode.classList.remove('treeList-leaf-dragging')
		document.body.classList.remove('treeList-body-dragging')
		dragNode = null;
	}, false);
	document.addEventListener("dragover", function(evt) {
		// 드롭을 허용하도록 prevetDefault() 호출
		// if (!evt.target.closest('.treeList-leaf')) {return;}
		if(dragNode)  evt.preventDefault();

	}, false);

	document.addEventListener("dragenter", function(evt) {
		// 요소를 드롭하려는 대상 위로 드래그했을 때 대상의 배경색 변경
		if(!dragNode){return;}
		if (!evt.target.classList.contains('treeList-leaf')) {return;}
		evt.target.classList.add('treeList-leaf-dropzone')
	}, false);
	document.addEventListener("dragleave", function(evt) {
		// 요소를 드래그하여 드롭하려던 대상으로부터 벗어났을 때 배경색 리셋
		if(!dragNode){return;}
		if (!evt.target.classList.contains('treeList-leaf')) {return;}
		evt.target.classList.remove('treeList-leaf-dropzone')
	}, false);

	document.addEventListener("drop", function(evt) {
		// 기본 액션을 막음 (링크 열기같은 것들)
		if(!dragNode){return;}
		if (!evt.target.classList.contains('treeList-leaf')) {return ;}
		evt.preventDefault();
		// 드래그한 요소를 드롭 대상으로 이동
		dragNode.classList.remove('treeList-leaf-dragging')
		document.body.classList.remove('treeList-body-dragging')
		evt.target.classList.remove('treeList-leaf-dropzone')
		// dragged.parentNode.removeChild( dragged );
		// evt.target.appendChild( dragged );
		if(evt.target === dragNode){
			console.log('fail : not move to same node');
			return false;
		}
		let dragNodeBranch = dragNode.closest('.treeList-branch')
		let targetNodeBranch = evt.target.closest('.treeList-branch')
		if(dragNodeBranch.contains(targetNodeBranch)){
			console.log('fail : not move to child node');
			return false;
		}
		targetNodeBranch.parentNode.insertBefore(dragNodeBranch, targetNodeBranch.nextSibling)
		dragNode = null;

	}, false);
	</script>
</head>
<body>
	<div class="container">
		<h1>treeList</h1>
		<h2>html class 사용</h2>
		<div>
			<a target="_blank" href="https://github.com/mins01/ui_treeList">https://github.com/mins01/ui_treeList</a>
		</div>
		<div>
			<a target="_blank" href="index.html">class-style</a>
		</div>
		<div>
			<a target="_blank" href="treeListSimple.html">treeListSimple</a>
		</div>
	</div>
	<div class="container">
		<hr>
		<script>
		function form_onsubmit(f){
			var cs = [];
			f.querySelectorAll('.classes:checked').forEach((item, i) => {
				cs.push(item.value)
			});
			document.querySelector('#div_treeList').className=cs.join(" ");
			f.classes.value=cs.join(" ");
		}
		</script>
		<script>
		window.onload= function(){
			form_onsubmit(document.form_conf);
			treeList.debug = true;
			treeList.addEvent();

		}
		</script>
		<form name="form_conf" action="" onchange="form_onsubmit(this);return">
			<input class="form-control mb-3 classes" type="checkbox" style="display:none" checked name="def_class" value="treeList">
			<div class="input-group mb-3">
				<div class="input-group-prepend">
					<span class="input-group-text" >theme</span>
				</div>
				<div class="form-control">
					<label><input type="radio" class="classes" name="theme_class" value="" checked> unset</label> ,
					<label><input type="radio" class="classes" name="theme_class" value="treeList-theme-0"> theme-0</label> ,
					<label><input type="radio" class="classes" name="theme_class" value="treeList-theme-1"> theme-1</label> ,
					<label><input type="radio" class="classes" name="theme_class" value="treeList-theme-2"> theme-2</label> ,
					<label><input type="radio" class="classes" name="theme_class" value="treeList-theme-3"> theme-3</label>
				</div>
			</div>
			<div class="input-group mb-3">
				<div class="input-group-prepend">
					<span class="input-group-text" >etc</span>
				</div>
				<div class="form-control">
					<label><input type="checkbox" class="classes" name="etc_class" value="treeList-hover"> hover</label> ,
					<label><input type="checkbox" class="classes" name="etc_class" value="treeList-hover-with-child"> hover-with-child</label> ,
					<label><input type="checkbox" class="classes" name="etc_class" value="treeList-hide-animation"> hide-animation</label>
					<button type="button" class="btn btn-sm btn-info" onclick="treeList.addEvent();">addEvent</button>
					<button type="button" class="btn btn-sm btn-info" onclick="treeList.removeEvent();">removeEvent</button>
				</div>
			</div>
			<div class="input-group mb-3">
				<div class="input-group-prepend">
					<span class="input-group-text" >className</span>
				</div>
				<input type="text" readonly class="form-control" name="classes">
			</div>
		</form>
	</div>
	<div class="container">
		<hr>
		<div  style="border:1px solid #eee;">
			<div class="treeList" id="div_treeList">
				<ul class="treeList-stem">
					<li class="treeList-branch">
						<div class="treeList-leaf treeList-leaf-flex">
							<div class="treeList-leaf-flex-text ellipsis">treeList-leaf-flex , treeList-leaf-flex-text 적용</div>
							<button type="button" class="btn btn-danger btn-sm treeList-show-stem">자식 보이기</button>
							<button type="button" class="btn btn-warning btn-sm treeList-hide-stem">자식 감추기</button>
							<button type="button" class="btn btn-success btn-sm treeList-toggle-stem">자식 토글</button>
						</div>
						<ul class="treeList-stem treeList-show-stem">
							<li class="treeList-branch">
								<div class="treeList-leaf treeList-leaf-flex">
									<button type="button" class="btn btn-warning btn-sm treeList-hide-parent-stem">부모 자식 감추기</button>
									<div class="treeList-leaf-flex-text ellipsis">treeList-leaf-flex , treeList-leaf-flex-text 적용</div>
								</div>
								<ul class="treeList-stem">
									<li class="treeList-branch">
										<div class="treeList-leaf">1</div>
									</li>
									<li class="treeList-branch">
										<div class="treeList-leaf">2<br>2<br>2<br>2<br>2<br></div>
									</li>
									<li class="treeList-branch  treeList-hidden-stem">
										<div class="treeList-leaf" draggable="true" ondragstart="event.dataTransfer.setData('text/plain',null)">dragable</div>
									</li>
								</ul>
							</li>
							<li class="treeList-branch treeList-hidden-stem">
								<div class="treeList-leaf treeList-toggle-stem">자식 토글</div>
								<ul class="treeList-stem treeList-show-stem" >
									<li class="treeList-branch">
										<div class="treeList-leaf  treeList-hide-parent-stem">부모의 자식 감추기</div>
									</li>
									<li class="treeList-branch">
										<div class="treeList-leaf">2<br>2<br>2<br>2<br>2<br></div>
										<ul class="treeList-stem">
											<li class="treeList-branch">
												<div class="treeList-leaf">1</div>
											</li>
											<li class="treeList-branch">
												<div class="treeList-leaf">2<br>2<br>2<br>2<br>2<br></div>
												<ul class="treeList-stem">
													<li class="treeList-branch">
														<div class="treeList-leaf">1</div>
													</li>
													<li class="treeList-branch">
														<div class="treeList-leaf">2<br>2<br>2<br>2<br>2<br></div>
													</li>
													<li class="treeList-branch">
														<div class="treeList-leaf">3</div>
													</li>
												</ul>
											</li>
											<li class="treeList-branch">
												<div class="treeList-leaf">3</div>
											</li>
										</ul>
									</li>
									<li class="treeList-branch">
										<div class="treeList-leaf">3</div>
									</li>
								</ul>
							</li>
							<li class="treeList-branch">
								<div class="treeList-leaf treeList-leaf-flex"  draggable="true" >
									<!-- <button type="button" class="btn btn-success btn-sm treeList-toggle-stem treeList-toggle-stem-icon"></button> -->

									<div class="treeList-leaf-flex-text"><span class="treeList-toggle-stem treeList-toggle-stem-icon"></span> treeList-leaf-flex , treeList-leaf-flex-text 적용</div>
									<button type="button" class="btn btn-success btn-sm" >장식 버튼1</button>
									<button type="button" class="btn btn-info btn-sm" >장식 버튼2</button>
								</div>
								<ul class="treeList-stem">
									<li class="treeList-branch">
										<div class="treeList-leaf">1</div>
									</li>
									<li class="treeList-branch">
										<div class="treeList-leaf">2<br>2<br>2<br>2<br>2<br></div>
									</li>
									<li class="treeList-branch">
										<div class="treeList-leaf">3</div>
									</li>
								</ul>
							</li>
						</ul>
					</li>
					<li class="treeList-branch">
						<div class="treeList-leaf">2</div>
					</li>
					<li class="treeList-branch">
						<div class="treeList-leaf">3<br>3<br>3<br>3<br></div>
					</li>
				</ul>
			</div>
		</div>
	</div>
	<footer class="container">*. 공대여자는 이쁘다.</footer>
</body>
</html>
